# Sekha v2.0 Environment Configuration
# Copy this file to .env and customize for your deployment

# ==============================================
# Service Ports
# ==============================================
POSTGRES_PORT=5432
CHROMA_PORT=8000
REDIS_PORT=6379
OLLAMA_PORT=11434
BRIDGE_PORT=5001
CONTROLLER_PORT=8080
ADMIN_PORT=3000

# ==============================================
# Database Configuration
# ==============================================
POSTGRES_DB=sekha
POSTGRES_USER=sekha
POSTGRES_PASSWORD=your_secure_password_here

# ==============================================
# Security
# ==============================================
# Comma-separated list of valid API keys
SEKHA_API_KEYS=dev_key_123,prod_key_456,your_api_key_here
ADMIN_API_KEY=dev_key_123

# ==============================================
# Logging
# ==============================================
LOG_LEVEL=info
RUST_LOG=info,sekha_controller=debug

# ==============================================
# ChromaDB
# ==============================================
CHROMA_TELEMETRY=false

# ==============================================
# Circuit Breaker Configuration
# ==============================================
# Number of failures before opening circuit
CB_FAILURE_THRESHOLD=5

# Time (seconds) before attempting to close circuit
CB_RESET_TIMEOUT=60

# Time (seconds) to allow test requests in half-open state
CB_HALF_OPEN_TIMEOUT=30

# ==============================================
# Routing Configuration
# ==============================================
# Enable automatic fallback to next provider
ROUTING_AUTO_FALLBACK=true

# Maximum cost per request (USD)
ROUTING_MAX_COST=0.10

# ==============================================
# Cloud Provider API Keys (Optional)
# ==============================================
# OpenAI
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# Anthropic (Claude)
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=

# OpenRouter (Multi-provider gateway)
# Get from: https://openrouter.ai/keys
OPENROUTER_API_KEY=

# ==============================================
# V2.0 Provider Configuration
# ==============================================
# This can be set here or via docker-compose.v2.yml
# Uncomment and customize for additional providers

# Example: Local Ollama + OpenAI Cloud
# SEKHA__LLM_PROVIDERS='[
#   {
#     "id": "ollama_local",
#     "type": "ollama",
#     "base_url": "http://ollama:11434",
#     "priority": 1,
#     "models": [
#       {
#         "model_id": "nomic-embed-text",
#         "task": "embedding",
#         "context_window": 512,
#         "dimension": 768
#       },
#       {
#         "model_id": "llama3.1:8b",
#         "task": "chat_small",
#         "context_window": 8192
#       }
#     ]
#   },
#   {
#     "id": "openai_cloud",
#     "type": "openai",
#     "base_url": "https://api.openai.com/v1",
#     "api_key": "${OPENAI_API_KEY}",
#     "priority": 2,
#     "models": [
#       {
#         "model_id": "gpt-4o",
#         "task": "chat_smart",
#         "context_window": 128000,
#         "supports_vision": true
#       },
#       {
#         "model_id": "gpt-4o-mini",
#         "task": "chat_small",
#         "context_window": 128000
#       }
#     ]
#   }
# ]'

# Default model configuration
# SEKHA__DEFAULT_MODELS='{
#   "embedding": "nomic-embed-text",
#   "chat_fast": "llama3.1:8b",
#   "chat_smart": "gpt-4o",
#   "chat_vision": "gpt-4o"
# }'

# ==============================================
# Deployment Notes
# ==============================================
# 1. For local-only deployment:
#    - Keep only ollama_local provider
#    - Set all default models to local models
#    - Leave cloud API keys empty
#    - Cost will be $0.00
#
# 2. For hybrid deployment:
#    - Configure both local and cloud providers
#    - Set cloud providers with priority > 1
#    - Add cloud API keys
#    - Set ROUTING_MAX_COST to control spending
#
# 3. For cloud-only deployment:
#    - Remove ollama service from docker-compose
#    - Configure only cloud providers
#    - Set appropriate cost limits
#    - Monitor usage and costs
#
# 4. Security:
#    - Change all default passwords
#    - Generate strong API keys
#    - Use secrets management in production
#    - Restrict network access
#    - Enable HTTPS/TLS
